---
import Layout from '../layouts/Layout.astro';
import GestionOfertas from '../components/GestionOfertas';
import ResumenVentasDiarias from '../components/ResumenVentasDiarias';
import ListaVentasFinalizadas from '../components/VentasFinalizadas';
---

<Layout title="Administración de Ventas">
  <link rel="manifest" href="/admin/manifest.json">
  <main class="min-h-screen bg-gray-100 p-4">
    <h1 class="text-3xl font-bold text-center mb-6">Administración de Ventas</h1>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <div class="w-full">
        <GestionOfertas client:load />
      </div>
      <div class="w-full">
        <ResumenVentasDiarias client:load />
      </div>
      <div class="w-full">
        <ListaVentasFinalizadas client:load />
      </div>
    </div>
  </main>
</Layout>

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/admin/sw.js')
      .then((registration) => {
        console.log('Service Worker de admin registrado con éxito:', registration.scope);
      })
      .catch((error) => {
        console.log('Error al registrar el Service Worker de admin:', error);
      });
  }
</script>